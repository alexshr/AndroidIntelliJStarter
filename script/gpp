#!/usr/bin/ruby
puts <<ART

      # ###          ##### ##         ##### ##
    /  /###  /    ######  /###     ######  /###
   /  /  ###/    /#   /  /  ###   /#   /  /  ###
  /  ##   ##    /    /  /    ### /    /  /    ###
 /  ###             /  /      ##     /  /      ##
##   ##            ## ##      ##    ## ##      ##
##   ##   ###      ## ##      ##    ## ##      ##
##   ##  /###  / /### ##      /   /### ##      /
##   ## /  ###/ / ### ##     /   / ### ##     /
##   ##/    ##     ## ######/       ## ######/
 ##  ##     #      ## ######        ## ######
  ## #      /      ## ##            ## ##
   ###     /       ## ##            ## ##
    ######/        ## ##            ## ##
      ###     ##   ## ##       ##   ## ##
             ###   #  /       ###   #  /
              ###    /         ###    /
               #####/           #####/
                 ###              ###

That's git pull, rebase, push, and all that stuff!
ART

def bail(project)
    puts ">>>> #{project} failed! <<<<"
    exit(1)
end

puts "\n[Robolectric]"
okay = system "(cd submodules/robolectric && git pull --rebase && ant clean test && git push)"

bail "Robolectric" unless okay

puts "\n[Project]"

okay = system "git pull --rebase && ant clean test && git push"
bail "Project" unless okay